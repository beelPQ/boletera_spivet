(()=>{"use strict";let e=async(e,t,a)=>{let r=[];r="GET"==t?{method:"GET"}:{method:"POST",body:a};let l=await fetch(e,r);return await l.json()},t=()=>{let t=new FormData;t.append("method","getMenuTypeOferts"),e("/modules/mod_inicio/tmpl/model/oferta.php","POST",t).then(e=>{if(e.status){let t=document.querySelector(".content-oferta-items-menu");t.innerHTML="";let a=document.createElement("button");a.classList.add("button-type-menu","oferta-menu","type-selected"),a.id="btnMenuType-all",a.innerText="Todos",a.dataset.idtype="todos",a.type="button",t.appendChild(a),e.data.forEach((e,a)=>{let r=document.createElement("button");r.classList.add("button-type-menu","oferta-menu"),r.id=`btnMenuType-${a}`,r.innerText=e.type,r.dataset.idtype=e.idType,r.type="button",t.appendChild(r)})}else console.error(e.message)}).catch(e=>{console.error(e)})},a=()=>{let e=document.querySelector(".wrapper-oferta"),t=e.querySelectorAll(".swiper-oferta-slide-figure");t.forEach(e=>{e.classList.remove("skeleton-loader")})},r=()=>{let t=new FormData;t.append("method","getOferta"),e("/modules/mod_inicio/tmpl/model/oferta.php","POST",t).then(e=>{if(e.status){let t=document.querySelector(".wrapper-oferta");sessionStorage.setItem("oferts",JSON.stringify(e.data)),e.data.forEach(e=>{let a=document.createElement("div");a.classList.add("swiper-slide","swiper-oferta-slide");let r=document.createElement("figure");r.classList.add("swiper-oferta-slide-figure","skeleton-loader"),r.dataset.type=e.type;let l=document.createElement("a"),s=e.nameProduct.replace(/\s+/g,"_");l.href=`./oferta/?oferta=${e.modality}-${e.prod}-${s}`;let i=document.createElement("img");if(null!=e.imageThumb&&""!=e.imageThumb){let n=e.imageThumb.replace(",","");i.src=n}else i.src="/images/Spivet/Oferta/thumb_temporal.png";i.classList.add("item-thumb");let d=document.createElement("div");d.classList.add("item-ofer-info");let p=document.createElement("p");p.classList.add("name-ofer"),p.innerText=e.nameProduct;let o=document.createElement("p");o.innerText=e.date;let c=document.createElement("p");c.innerText=e.modality,d.appendChild(p),d.appendChild(o),d.appendChild(c),l.appendChild(d),l.appendChild(i),r.appendChild(l),a.append(r),t.appendChild(a)})}else console.error(e.message)}).catch(e=>{console.error(e)})},l=()=>{setTimeout(()=>{new Swiper(".mySwiperOferta",{cssMode:!0,slidesPerView:5,spaceBetween:30,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{"@0.00":{slidesPerView:1,spaceBetween:10},"@0.75":{slidesPerView:2,spaceBetween:20},"@1.00":{slidesPerView:3,spaceBetween:40},"@1.50":{slidesPerView:4,spaceBetween:50}}}),setTimeout(()=>{a()},300),n()},1500)},s=e=>{let t=document.querySelector(".wrapper-oferta");t.innerHTML="",e.forEach(e=>{let a=document.createElement("div");a.classList.add("swiper-slide","swiper-oferta-slide");let r=document.createElement("figure");r.classList.add("swiper-oferta-slide-figure","skeleton-loader"),r.dataset.type=e.type;let l=document.createElement("a"),s=e.nameProduct.replace(/\s+/g,"_");l.href=`./oferta/?oferta=${e.modality}-${e.prod}-${s}`;let i=document.createElement("img");if(null!=e.imageThumb&&""!=e.imageThumb){let n=e.imageThumb.replace(",","");i.src=n}else i.src="/images/Spivet/Oferta/thumb_temporal.png";i.classList.add("item-thumb");let d=document.createElement("div");d.classList.add("item-ofer-info");let p=document.createElement("p");p.classList.add("name-ofer"),p.innerText=e.nameProduct;let o=document.createElement("p");o.innerText=e.date;let c=document.createElement("p");c.innerText=e.modality,d.appendChild(p),d.appendChild(o),d.appendChild(c),l.appendChild(d),l.appendChild(i),r.appendChild(l),a.append(r),t.appendChild(a)}),l()},i=e=>{let t=[],a=JSON.parse(sessionStorage.getItem("oferts"));"todos"!=e?(a.forEach(a=>{e==a.type&&t.push(a)}),s(t)):s(a)},n=()=>{if(document.querySelector(".swiper-wrapper")){let e=document.querySelector(".swiper-oferta"),t=e.querySelector(".swiper-wrapper");t.classList.remove("swiper--center");let a=e.querySelector(".swiper-button-next"),r=e.querySelector(".swiper-button-prev");a.className.includes("swiper-button-disabled")&&r.className.includes("swiper-button-disabled")&&t.classList.add("swiper--center")}};window.onresize=function(e){n()},document.addEventListener("click",e=>{let t=e.target.id;if(t.includes("btnMenuType-")){let a=document.querySelectorAll(".button-type-menu");a.forEach(e=>{e.classList.contains("type-selected")&&e.classList.remove("type-selected")});let r=document.querySelector(`#${t}`),l=r.dataset.idtype;r.classList.contains("type-selected")||r.classList.add("type-selected"),i(l)}}),setTimeout(()=>{t(),r(),l()},1e3),window.addEventListener("DOMContentLoaded",()=>{})})();