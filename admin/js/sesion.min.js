function eventListeners(){document.querySelector("#sesion").addEventListener("submit",iniciarsesion)}const login=e=>{let r=document.querySelector("#email").value,n=document.querySelector("#password").value;if(""!=r){if(""!=n){var t=new FormData;t.append("email",r),t.append("password",n),t.append("accion",e);var a=new XMLHttpRequest;a.open("POST","includes/modelo/sesion.php",!0),a.onload=function(){if(200===this.status){var e=JSON.parse(a.responseText);if("success"===e.respuesta){setTimeout("location.href='index.php'",1e3);let r=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3});r.fire({icon:e.respuesta,title:e.mensaje})}else Swal.fire("Error",e.mensaje,e.respuesta,"Volver a intentar")}else Swal.fire("Error","Sucedio un error","error","Aceptar")},a.send(t)}else Swal.fire("Completa el campo","Contrase\xf1a","error","Aceptar")}else Swal.fire("Completa el campo","Email","error","Aceptar")},validateRecaptcha=e=>{grecaptcha.ready(function(){grecaptcha.execute("6LeRmJsnAAAAAPS2pKsciM4VrvEckKlESimnAlhr",{action:"formulario_pago"}).then(function(r){let n=document.createElement("input");n.type="hidden",n.name="g-recaptcha-response",n.value=r,document.querySelector("#sesion").appendChild(n);let t=new FormData;t.append("token",r);let a=new XMLHttpRequest;a.open("POST","includes/modelo/verificar_captcha.php",!0),a.onload=function(){let r=JSON.parse(this.response);if(!r.reqStatus){Swal.fire("Error en reCaptcha","El reCaptcha no fue reconocido para este sitio","error","Aceptar");return}login(e)},a.send(t)})})};function iniciarsesion(e){e.preventDefault();let r=document.querySelector("#tipo").value;"login"===r&&validateRecaptcha(r)}eventListeners();