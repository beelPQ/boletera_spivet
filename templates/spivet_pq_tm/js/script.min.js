(()=>{"use strict";let e=document.querySelector("#headerContent"),t=document.querySelector("footer")||null,l=document.querySelector(".spinner")||null,r=async(e,t,l)=>{let r=[];r="GET"==t?{method:"GET"}:{method:"POST",body:l};let o=await fetch(e,r);return await o.json()},o=new URL(window.location.href),i=o.searchParams.get("option"),a=o.searchParams.get("view")||"",n=o.searchParams.get("layout")||"";if(document.querySelector("main")||document.querySelector(".mod-login")||document.querySelector("form.mod-login-logout")){document.querySelector("form.mod-login-logout");let s=document.querySelector(".mod-login")||null,c=document.querySelector(".com-users-registration__form")||null,u=document.querySelector("main")||null,m=document.createElement("main");if("com_blank"==i||"com_users"==i&&null!==l){if(null!==u&&u.classList.add("loginContent"),null!==s&&s.querySelector("ul.mod-login__options")){s.classList.add("login");let d=s.querySelector("ul.mod-login__options"),$=d.querySelectorAll("li");$.forEach(e=>{e.classList.contains("forgot_your_username")&&d.removeChild(e)})}if(null!==t&&null!==m){if(m.classList.add("loginContent"),null!==s&&m.appendChild(s),document.body.insertBefore(m,t),sessionStorage.getItem("errorinlog")&&"ok"==sessionStorage.getItem("errorinlog")){let _=s.closest("main"),g=document.createElement("div");g.classList.add("alert","alert-danger","alert-dismissible","fade","show"),g.setAttribute("role","alert"),g.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></symbol><symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/></symbol><symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></symbol></svg><div><svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg><strong>\xa1Acceso denegado!</strong> Revise sus credenciales de acceso.<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>`,null!==_&&(_.insertBefore(g,s),sessionStorage.removeItem("errorinlog"))}if("registration"==a){if(null!==c){let p=c.querySelector("#btnRegisterUser")||null,f=c.querySelector("#btn_reguser")||null;f.addEventListener("click",e=>{e.preventDefault();let t=new FormData;t.append("method","user_auth");let l=0,o=c.querySelectorAll("input");o.forEach(e=>{let r=e.getAttribute("name");r.includes("[name]")&&(""!=e.value.trim()?t.append("name",e.value.trim()):l+=1),r.includes("[password2]")&&(""!=e.value.trim()?t.append("password",e.value.trim()):l+=1),r.includes("[email1]")&&(""!=e.value.trim()?t.append("email",e.value.trim()):l+=1)}),l>0||r("/modules/mod_buycarform/tmpl/model/buyCarForm.php","POST",t).then(e=>{let{status:t,message:l,description:r,data:o}=e;if(!t){Swal.fire({title:l,text:r,icon:"warning",confirmButtonText:"Aceptar",confirmButtonColor:"#000",allowOutsideClick:!1,allowEscapeKey:!1});return}localStorage.setItem("userid",o.user_id),p.click()}).catch(e=>{console.warn(e),Swal.fire({title:"Error inesperado",text:"Consulte al adminstrador del sitio o intente m\xe1s tarde",icon:"info",confirmButtonText:"Aceptar",confirmButtonColor:"#000",allowOutsideClick:!1,allowEscapeKey:!1})})})}if("complete"==n){let y=document.querySelector(".registration-complete");y.innerHTML=`<h1>Usuario registrado</h1><p>Revise su correo electr\xf3nico para activar al usuario</p>`;let h=localStorage.getItem("inlogin");localStorage.getItem("inlogin")&&localStorage.removeItem("inlogin"),setTimeout(()=>{window.close(),localStorage.setItem("loginRegisUser","success"),location.href=h},2500)}}}}}else"com_users"==i&&"login"==a&&(sessionStorage.setItem("errorinlog","ok"),window.location.href=localStorage.getItem("inlogin")),"com_content"==i&&"featured"==a&&(window.location.href="/");setTimeout(()=>{let e=document.querySelector("#headerContent");document.querySelector("#tapeAnouncements")?e.classList.contains("anouncement-available")&&e.classList.remove("anouncement-available"):e.classList.contains("anouncement-available")||e.classList.add("anouncement-available")},500),document.addEventListener("DOMContentLoaded",()=>{if(localStorage.getItem("loginRegisUser")&&"success"==localStorage.getItem("loginRegisUser")&&(location.href=null!==localStorage.getItem("inhost")&&"server"==localStorage.getItem("inhost")?`${window.location.origin}/formulario-de-pago`:`${window.location.origin}/index.php?option=com_blank&view=blank&Itemid=109`),localStorage.getItem("user_profile")){e.classList.add("registered");let t=e.querySelector("#to_pqoverlay"),l=t.querySelector(".hamburger");l.classList.add("invertcolor");let r=t.querySelector("#pqOverlayScreen");r.classList.add("registered");let o=new URL(window.location.href),i=localStorage.getItem("user_profile")||"";"/"==o.pathname&&window.location.replace(i)}else e.classList.remove("registered")}),window.addEventListener("load",()=>{setTimeout(()=>{let t=document.body.getAttribute("data-email")||"";if(""!=t.trim()){let o=new FormData;o.append("method","get_user_auth"),o.append("id",localStorage.getItem("userid")||""),o.append("email",t),r("/modules/mod_buycarform/tmpl/model/buyCarForm.php","POST",o).then(e=>{let{status:t,message:l,description:r,data:o}=e;t&&localStorage.setItem("userid",o.id)}).catch(e=>{console.log(e)})}null===localStorage.getItem("user_profile")||e.classList.contains("registered")?l.style.display="none":(l.style.display="flex",location.reload())},500)})})();